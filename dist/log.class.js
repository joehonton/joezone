var StackTrace=require("./stack-trace.class.js"),Text=require("./text.class.js"),expect=require("./expect.function.js");module.exports=class{constructor(processName){expect(processName,["String","undefined"]),this.processName=void 0===processName?"":`[${processName}]`,this.tag={todo:"    [TODO]",trace:"   [TRACE]",normal:"  [NORMAL]",abnormal:"[ABNORMAL]",invalid:" [INVALID]",security:"[SECURITY]",logic:"   [LOGIC]",hopeless:"[HOPELESS]",exit:"[    EXIT]"},Object.seal(this)}todo(message,args){this.stderr(this.tag.todo,message,args)}trace(message,args){this.stderr(this.tag.trace,message,args)}normal(message,args){this.stderr(this.tag.normal,message,args)}abnormal(message,args){this.stderr(this.tag.abnormal,message,args)}abnormalHalt(message,args){this.stderr(this.tag.abnormal,message,args),this.exit(303,"HALT")}invalid(message,args){this.stderr(this.tag.invalid,message,args)}invalidHalt(message,args){this.stderr(this.tag.invalid,message,args),this.exit(505,"HALT")}security(message,args){this.stderr(this.tag.security,message,args)}securityHalt(message,args){this.stderr(this.tag.security,message,args),this.exit(707,"HALT")}logic(message,args){this.stderr(this.tag.logic,message,args)}logicHalt(message,args){this.stderr(this.tag.logic,message,args),this.exit(808,"HALT")}hopelessHalt(message,args){this.stderr(this.tag.hopeless,message,args),this.exit(909,"HALT")}exit(rc,message){message=message||"",expect(rc,"Number"),expect(message,"String"),this.stderr(this.tag.exit,rc,` ${message}\n`),process.exit(0)}stderr(tag,message,args){(message=message||"")instanceof Error&&(message=message.message),expect(message,"String"),expect(args=args||"","String"),this.writeToConsoleOrStderr(`${this.processName}${tag}${StackTrace.getFunctionName(4)} ${message}${args}`)}stackTrace(){var stack=(new Error).stack.split("\n");for(let s of stack)this.trace(s)}writeToConsoleOrStderr(message){if("object"==typeof console&&"function"==typeof console.warn)console.warn(message);else{if("object"!=typeof process||"object"!=typeof process.stderr||"function"!=typeof process.stderr.write)throw new Error(message);process.stderr.write(message)}}};